
<app-nav-bar [transform]="'admin'"></app-nav-bar>
<div class="main">
    
    <div class="container" >
        <h1 style="font-weight: 500;">Informacion general</h1>
        <!--RolesPermisos-->
        <mat-grid-list cols="2" rowHeight="400"   gutterSize="15px"  >
            <mat-grid-tile rowspan="1" class="mat-elevation-z5"  >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;">Roles/Privilegios</mat-card-title>
    
                        <button class="btn-add" mat-raised-button (click)="openRegisterRole()"><mat-icon>add</mat-icon> ROL</button>
                    </div>
                    <mat-divider></mat-divider>

                    <div class="container-table">
                        <table mat-table [dataSource]="dataSourceRole" class="mat-elevation-z5" style="width: 95%;">
    
                        <ng-container matColumnDef="index" >
                            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 70px;font-weight: bold;"> Nro </th>
                            <td mat-cell *matCellDef="let element;let i=index;" style="text-align: center;" > {{i+1}} </td>
                        </ng-container>
    
                        <ng-container *ngFor="let columna of columnasRole" matColumnDef="{{columna.name}}" >
                          <th mat-header-cell *matHeaderCellDef style="text-align: center;  min-width: 150px; font-weight: bold;"> {{columna.titulo}}  </th>
                          <td mat-cell *matCellDef="let element" style="min-width: 85px;text-align: center;"> {{element[columna.name]}} </td>
                        </ng-container>

                        <ng-container matColumnDef="privileges" >
                            <th mat-header-cell *matHeaderCellDef style="min-width: 70px;   text-align: center;font-weight: bold;"> PRIVILEGIOS </th>
                            <td mat-cell *matCellDef="let element   " style="text-align: center; " >
                                <button mat-icon-button type="button"  [matMenuTriggerFor]="menu" >
                                    <mat-icon matSuffix style="color:var(--btn-color-pri);">vpn_key</mat-icon>
                                </button>
                                <mat-menu #menu="matMenu">
                                    <button mat-menu-item disabled *ngFor=" let priv of element.privilegios ">
                                        <mat-icon matSuffix style="color:rgb(214, 214, 214)" >check_box</mat-icon>
                                        {{priv.privilege}}
                                    </button>
                                </mat-menu>
                                  
                             </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="actions" >
                            <th mat-header-cell *matHeaderCellDef style="min-width: 85px;   text-align: center;font-weight: bold;"> ACCIONES </th>
                            <td mat-cell *matCellDef="let element   " style="text-align: center; " > 

                               
                                <button mat-icon-button type="button" matSuffix  >
                                    <mat-icon style="color:var(--state-color-3);">edit</mat-icon>
                                </button>

                             </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
    
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsRole"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsRole;"></tr>
                      </table>
                    </div>

                </div>
    
            </mat-grid-tile >

            <!--Unidades-->
            <mat-grid-tile rowspan="1" class="mat-elevation-z5"   >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;" >Unidades</mat-card-title>
                            
                        <button class="btn-add" mat-raised-button (click)="openRegisterUnidad()"><mat-icon>add</mat-icon> UNIDAD</button>
                    </div>
                    <mat-divider></mat-divider>                
                    <div style="margin-top: 15px;">
                        <div style="height: 310px; overflow: scroll; overflow-x: hidden;    ">
                        <mat-grid-list cols="1" rowHeight="83px" gutterSize="7px">
                            
                            <mat-grid-tile *ngFor="let unit of units"  >
                                
                                <div class="card-unit" >
                                    <h4 class="title-unit" style="line-height: 0px;">{{unit.nameUnit}}</h4>
                                    
                                    <h4   *ngIf="unit.responsable!==null">Responsable: <p>{{unit.responsable}}</p></h4>

                                    <div *ngIf="unit.responsable==null" style="display: flex; height: 20px; ">
                                            <h4 style="margin-top: 6px;"> Responsable: <p>sin asignar</p> </h4>

                                            <div style="margin-left: 15px; ">
                                                <button style=" height: 20px; width: 20px; " mat-icon-button (click)="openAssignement(unit.employees)" >
                                                        <mat-icon style="margin-bottom: 25px; color:var(--btn-color-pri);  font-size:20px;">person</mat-icon>
                                                </button>
                                            </div>
                                    </div>
                                    <h4 style="margin-top: 7px;" >{{unit.faculty}}</h4>
                                    <!--h4 >Descripci√≥n: {{unit.description}}</h4-->
                                </div>
                                
                            </mat-grid-tile>
                            
                        </mat-grid-list>
                    </div>
                    </div>
                </div>

            </mat-grid-tile>

            <!--Empresas>
            <mat-grid-tile rowspan="1" class="mat-elevation-z5"  >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;" >Empresas</mat-card-title>
    
                    </div>
                    <mat-divider></mat-divider>
                </div>
                
            </mat-grid-tile->

            <!--USuarios-->
            <mat-grid-tile colspan="2"  class="mat-elevation-z5"   >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;">Usuarios</mat-card-title>
    
                        <button class="btn-add" mat-raised-button (click)="openRegisterUser()"><mat-icon>add</mat-icon>USUARIO</button>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="container-table" >
                        <table mat-table [dataSource]="dataSource" class="mat-elevation-z5" style="width: 90%;">
    
                        <ng-container matColumnDef="index" >
                            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;font-weight: bold;"> Nro </th>
                            <td mat-cell *matCellDef="let element;let i=index;" style="text-align: center;" > {{i+1}} </td>
                        </ng-container>
    
                        <ng-container *ngFor="let columna of columnas" matColumnDef="{{columna.name}}" >
                          <th mat-header-cell *matHeaderCellDef style="text-align: center;  min-width: 100px; font-weight: bold;"> {{columna.titulo}}  </th>
                          <td mat-cell *matCellDef="let element" style="min-width: 85px;text-align: center;"> {{element[columna.name]}} </td>
                        </ng-container>
                        <ng-container matColumnDef="actions" >
                            <th mat-header-cell *matHeaderCellDef style="min-width: 85px;   text-align: center;font-weight: bold;"> ACCIONES </th>
                            <td mat-cell *matCellDef="let element   " style="text-align: center; " > 

                               
                                <button mat-icon-button matSuffix  >
                                    <mat-icon style="color:var(--state-color-3);" (click)="openEditUser(element)">edit</mat-icon>
                                </button>

                             </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
    
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                      </table></div>
    
                    <!--div style="text-align: end;">
                        <button mat-raised-button>VER TODO</button>
                    </div-->
                </div>
            </mat-grid-tile>
      
            
        </mat-grid-list>
    </div>
</div>
<style>

</style>
